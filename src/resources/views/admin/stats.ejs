
<body>
<div class="d-flex">
  <div class="sidebar p-2">
      <a href="/admin/dashboard">ğŸ“Š Dashboard</a>
      <a href="/admin/users">ğŸ‘¥ Quáº£n lÃ½ User</a>
      <a href="/admin/comments">ğŸ’¬ BÃ¬nh luáº­n</a>
      <a href="/admin/stats">ğŸ“ˆ Thá»‘ng kÃª</a>
      <a href="/admin/settings">âš™ï¸ Cáº¥u hÃ¬nh</a>
    </div>

  <div class="flex-grow-1 p-3" style="width: 80%;">
    <div class="statistical-flex">
      <div class="admin-card statistical">
      <div class="card-header" style="color: #000;">ğŸ“ˆ Tá»‰ lá»‡ thá»ƒ loáº¡i phim</div>
        <div class="card-body">
          <canvas id="genreStats"></canvas>
        </div>
    </div>

    <div class="admin-card statistical">
      <div class="card-header" style="color: #000;">ğŸ“ˆ LÆ°á»£t xem theo thÃ¡ng</div>
        <div class="card-body">
          <canvas id="monthlyViews"></canvas>
        </div>
    </div>

    <div class="admin-card statistical">
      <div class="card-header" style="color: #000;">ğŸ”¥ Top phim nhiá»u lÆ°á»£t xem cho tÃ i khoáº£n Ä‘Äƒng nháº­p</div>
        <div class="card-body">
         <canvas id="topFilms"></canvas>
        </div>
    </div>

    <div class="admin-card statistical">
      <div class="card-header" style="color: #000;">ğŸ”¥ Top phim nhiá»u lÆ°á»£t xem cho tÃ i khoáº£n khÃ¡ch</div>
        <div class="card-body">
         <canvas id="topFilmsForG"></canvas>
        </div>
    </div>
  </div>
    </div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const genres = ['HÃ nh Ä‘á»™ng','TÃ¬nh cáº£m','Kinh dá»‹','Hoáº¡t hÃ¬nh','HÃ i hÆ°á»›c','KhÃ¡c'];
    const genreViews = [4000,2500,1500,1800,2200,1200];

    const genreStats = document.getElementById('genreStats');
    new Chart(genreStats, {
      type: 'pie',
      data: {
        labels: genres,
        datasets: [{
          data: genreViews,
          backgroundColor: ['#ff6384','#36a2eb','#ffce56','#4bc0c0','#9966ff','#ff9f40']
        }]
      }
    });


    const filmData = <%- JSON.stringify(listFilmForUser) %>;
    // TÃ¡ch labels (tÃªn phim) vÃ  data (lÆ°á»£t xem)
    const labels = filmData.map(f => f.name);
    const data = filmData.map(f => f.totalViews);
    new Chart(document.getElementById('topFilms'), {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'LÆ°á»£t xem',
        data: data,
        backgroundColor: ['#ff6384','#36a2eb','#ffce56','#4bc0c0']
      }]
    }
  });


  const filmDataForG = <%- JSON.stringify(listFilmForGuest) %>;
    // TÃ¡ch labels (tÃªn phim) vÃ  data (lÆ°á»£t xem)
  const labelsForG = filmDataForG.map(f => f.name);
  const dataForG = filmDataForG.map(f => f.totalViews);
  new Chart(document.getElementById('topFilmsForG'), {
    type: 'bar',
    data: {
      labels: labelsForG,
      datasets: [{
        label: 'LÆ°á»£t xem',
        data: dataForG,
        backgroundColor: ['#ff6384','#36a2eb','#ffce56','#4bc0c0']
      }]
    }
  });

  const viewByMonth = <%- JSON.stringify(viewsByMonth) %>;
  new Chart(document.getElementById('monthlyViews'), {
    type: 'line',
    data: {
      labels: ['T1','T2','T3','T4','T5','T6','T7','T8','T9','T10','T11','T12'],
      datasets: [{
        label: 'LÆ°á»£t xem',
        data: viewByMonth,
        borderColor: 'rgb(75, 192, 192)',
        tension: 0.2
      }]
    }
  });
  </script>
</body>
</html>
